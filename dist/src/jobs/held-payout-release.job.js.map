{"version":3,"sources":["../../../src/jobs/held-payout-release.job.ts"],"sourcesContent":["import cron from 'node-cron';\nimport { heldPayoutService } from '../services/held-payout.service';\n\n// Run every hour to check for held payouts that should be released\nconst scheduleHeldPayoutRelease = () => {\n  // Run every hour at minute 0\n  cron.schedule('0 * * * *', async () => {\n    console.log('[Held Payout Release Job] Starting scheduled release check...');\n    \n    try {\n      await heldPayoutService.processScheduledReleases();\n      console.log('[Held Payout Release Job] Completed scheduled release check');\n    } catch (error) {\n      console.error('[Held Payout Release Job] Error processing scheduled releases:', error);\n    }\n  });\n\n  console.log('[Held Payout Release Job] Scheduled to run every hour');\n};\n\n// For weekend releases, run a special check on Fridays at 6 PM\nconst scheduleWeekendPayoutRelease = () => {\n  // Run every Friday at 6:00 PM\n  cron.schedule('0 18 * * 5', async () => {\n    console.log('[Weekend Payout Release Job] Starting weekend payout release...');\n    \n    try {\n      await heldPayoutService.processScheduledReleases();\n      console.log('[Weekend Payout Release Job] Completed weekend payout release');\n    } catch (error) {\n      console.error('[Weekend Payout Release Job] Error processing weekend releases:', error);\n    }\n  });\n\n  console.log('[Weekend Payout Release Job] Scheduled to run on Fridays at 6 PM');\n};\n\nexport const startHeldPayoutReleaseJobs = () => {\n  scheduleHeldPayoutRelease();\n  scheduleWeekendPayoutRelease();\n};"],"names":["startHeldPayoutReleaseJobs","scheduleHeldPayoutRelease","cron","schedule","console","log","heldPayoutService","processScheduledReleases","error","scheduleWeekendPayoutRelease"],"mappings":";;;;+BAqCaA;;;eAAAA;;;iEArCI;mCACiB;;;;;;AAElC,mEAAmE;AACnE,MAAMC,4BAA4B;IAChC,6BAA6B;IAC7BC,iBAAI,CAACC,QAAQ,CAAC,aAAa;QACzBC,QAAQC,GAAG,CAAC;QAEZ,IAAI;YACF,MAAMC,oCAAiB,CAACC,wBAAwB;YAChDH,QAAQC,GAAG,CAAC;QACd,EAAE,OAAOG,OAAO;YACdJ,QAAQI,KAAK,CAAC,kEAAkEA;QAClF;IACF;IAEAJ,QAAQC,GAAG,CAAC;AACd;AAEA,+DAA+D;AAC/D,MAAMI,+BAA+B;IACnC,8BAA8B;IAC9BP,iBAAI,CAACC,QAAQ,CAAC,cAAc;QAC1BC,QAAQC,GAAG,CAAC;QAEZ,IAAI;YACF,MAAMC,oCAAiB,CAACC,wBAAwB;YAChDH,QAAQC,GAAG,CAAC;QACd,EAAE,OAAOG,OAAO;YACdJ,QAAQI,KAAK,CAAC,mEAAmEA;QACnF;IACF;IAEAJ,QAAQC,GAAG,CAAC;AACd;AAEO,MAAML,6BAA6B;IACxCC;IACAQ;AACF"}